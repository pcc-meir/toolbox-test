{"version":3,"file":"ToolsPage.esm.js","sources":["../../../src/components/Root/ToolsPage.tsx"],"sourcesContent":["import React, { ReactElement, Suspense, useEffect, useMemo } from 'react';\nimport {\n  Content,\n  ContentHeader,\n  Header,\n  Page,\n} from '@backstage/core-components';\nimport { useFavoriteStorage, useStyles } from '../../utils/hooks';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { defaultTools } from './tools';\nimport OpenInNew from '@mui/icons-material/OpenInNew';\nimport { FavoriteButton } from '../Buttons';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport { WelcomePage } from '../WelcomePage/WelcomePage';\nimport { Tool } from '@drodil/backstage-plugin-toolbox-react';\nimport Tab from '@mui/material/Tab';\nimport Grid from '@mui/material/Grid';\nimport InputBase from '@mui/material/InputBase';\nimport Paper from '@mui/material/Paper';\nimport IconButton from '@mui/material/IconButton';\nimport Tabs from '@mui/material/Tabs';\nimport Box from '@mui/material/Box';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Tooltip from '@mui/material/Tooltip';\nimport Button from '@mui/material/Button';\nimport TabPanel from '@mui/lab/TabPanel';\nimport TabContext from '@mui/lab/TabContext';\nimport { useBackendTools, useToolboxTranslation } from '../../hooks';\n\ntype TabInfo = {\n  tab: ReactElement;\n  component: ReactElement | undefined;\n  id: string;\n  localizedTitle: string;\n  showOpenInNewWindowButton?: boolean;\n  showFavoriteButton?: boolean;\n  description?: string;\n  localizedDescription?: string;\n  headerButtons?: ReactElement[];\n};\n\nconst tabProps = (index: number) => {\n  return {\n    id: `toolbox-tab-${index}`,\n    'aria-controls': `toolbox-tabpanel-${index}`,\n  };\n};\n\nexport type ToolsPageProps = {\n  /** extra custom local tools to add into the tool page */\n  extraTools?: Tool[];\n  /** A list of which tools to have by default. Defaults to defaultTools.*/\n  tools?: Tool[];\n  /** Allows for custom sorting of the categories in the sidebar. Defaults to alphabetic sort with Favorites at top. */\n  categorySortFunction?: (category1: string, caregory2: string) => number;\n  /** Allows for custom sorting of the tools within a category. Defaults to alphabetic sort. */\n  toolSortFunction?: (tool1: Tool, tool2: Tool) => number;\n  /** Filter tools to be shown in runtime */\n  toolFilterFunction?: (tool: Tool) => boolean;\n  /** customize the landing page */\n  welcomePage?: ReactElement;\n};\n\nexport const ToolsPage = (props: ToolsPageProps) => {\n  const {\n    extraTools,\n    tools,\n    categorySortFunction,\n    toolSortFunction,\n    welcomePage,\n    toolFilterFunction,\n  } = props;\n  const { hash } = useLocation();\n  const navigate = useNavigate();\n  const analytics = useAnalytics();\n  const [value, setValue] = React.useState(1);\n  const [search, setSearch] = React.useState('');\n  const backendTools = useBackendTools();\n  const favorites = useFavoriteStorage();\n  const { classes } = useStyles();\n\n  const { t } = useToolboxTranslation();\n\n  const openToolInWindow = (id: string) => {\n    window.open(`/toolbox/tool/${id}`, 'newwindow', 'width=1000,height=800');\n    return false;\n  };\n\n  useEffect(() => {\n    if (value === 0) {\n      setValue(1);\n    }\n  }, [value]);\n\n  const tabs: TabInfo[] = useMemo(() => {\n    const tabInfos: TabInfo[] = [];\n    const favoritesCategory = t('tool.category.favorites');\n    const shownTools = tools ? tools : [...(extraTools ?? []), ...defaultTools];\n    const filteredTools = shownTools\n      .filter(\n        tool =>\n          (tool.requiresBackend === true && backendTools.includes(tool.id)) ||\n          tool.requiresBackend !== true,\n      )\n      .filter(tool => toolFilterFunction?.(tool) ?? true);\n\n    const allTools = filteredTools\n      .map(tool => {\n        if (favorites.includes(tool.id)) {\n          return { ...tool, category: favoritesCategory };\n        }\n        return tool;\n      })\n      .sort((a, b) => {\n        const aCategoryStr = t(\n          `tool.category.${(a.category ?? 'miscellaneous').toLowerCase()}`,\n          {\n            defaultValue: a.category ?? 'Miscellaneous',\n          },\n        );\n        const bCategoryStr = t(\n          `tool.category.${(b.category ?? 'miscellaneous').toLowerCase()}`,\n          {\n            defaultValue: b.category ?? 'Miscellaneous',\n          },\n        );\n        if (aCategoryStr === favoritesCategory) {\n          return -1;\n        } else if (bCategoryStr === favoritesCategory) {\n          return 1;\n        }\n        return (aCategoryStr ?? '').localeCompare(bCategoryStr ?? '');\n      });\n\n    tabInfos.push({\n      tab: (\n        <Tab\n          key=\"Toolbox\"\n          label=\"\"\n          disabled\n          className={classes.tabDivider}\n          style={{ minHeight: '2px' }}\n        />\n      ),\n      component: undefined,\n      id: 'toolbox',\n      localizedTitle: '',\n    });\n\n    tabInfos.push({\n      id: '',\n      tab: (\n        <Tab\n          key=\"toolbox\"\n          wrapped\n          className={`${classes.fullWidth} ${classes.noPadding} ${classes.tab}`}\n          label={t('toolsPage.tabPanel.mainLabel')}\n        />\n      ),\n      localizedTitle: t('toolsPage.pageTitle'),\n      component: welcomePage || <WelcomePage tools={allTools} />,\n      showFavoriteButton: false,\n      showOpenInNewWindowButton: false,\n    });\n\n    const categories: { [key: string]: Tool[] } = allTools.reduce(\n      (ctgs, tool) => {\n        const categoryStr = t(\n          `tool.category.${(tool.category ?? 'miscellaneous').toLowerCase()}`,\n          {\n            defaultValue: tool.category ?? 'Miscellaneous',\n          },\n        );\n        const toolList: Tool[] = ctgs[categoryStr] || [];\n        toolList.push(tool);\n        ctgs[categoryStr] = toolList;\n        return ctgs;\n      },\n      {} as Record<string, Tool[]>,\n    );\n\n    const matchesSearch = (tool: Tool) => {\n      if (!search) {\n        return true;\n      }\n      const toolName = t(`tool.${tool.id}.name`, { defaultValue: tool.name });\n      const description = t(`tool.${tool.id}.description`, {\n        defaultValue: tool.description,\n      });\n      return (\n        toolName.toLowerCase().includes(search.toLowerCase()) ||\n        tool.id.toLowerCase().includes(search.toLowerCase()) ||\n        tool.aliases?.some(alias =>\n          alias.toLowerCase().includes(search.toLowerCase()),\n        ) ||\n        description?.toLowerCase().includes(search.toLowerCase())\n      );\n    };\n\n    Object.entries(categories)\n      .sort(([a, _], [b, __]) => {\n        if (categorySortFunction) {\n          return categorySortFunction(a, b);\n        } else if (a === favoritesCategory) {\n          return -1;\n        } else if (b === favoritesCategory) {\n          return 1;\n        }\n        return a.localeCompare(b);\n      })\n      .map(([category, categoryTools]) => {\n        const anyMatchSearch = categoryTools.some(tool => matchesSearch(tool));\n\n        tabInfos.push({\n          tab: (\n            <Tab\n              style={!anyMatchSearch ? { display: 'none' } : {}}\n              key={category}\n              label={category}\n              disabled\n              className={classes.tabDivider}\n            />\n          ),\n          component: undefined,\n          id: category,\n          localizedTitle: '',\n        });\n\n        categoryTools\n          .sort((a, b) => {\n            if (toolSortFunction) {\n              return toolSortFunction(a, b);\n            }\n            return a.name.localeCompare(b.name);\n          })\n          .map((tool, i) => {\n            tabInfos.push({\n              tab: (\n                <Tab\n                  key={tool.name}\n                  style={!matchesSearch(tool) ? { display: 'none' } : {}}\n                  wrapped\n                  className={`${classes.fullWidth} ${classes.noPadding} ${classes.tab}`}\n                  label={t(`tool.${tool.id}.name`, { defaultValue: tool.name })}\n                  {...tabProps(i)}\n                />\n              ),\n              localizedTitle: `${category} - ${t(`tool.${tool.id}.name`, {\n                defaultValue: tool.name,\n              })}`,\n              localizedDescription: t(`tool.${tool.id}.description`, {\n                defaultValue: tool.description,\n              }),\n              ...tool,\n            });\n          });\n      });\n    return tabInfos;\n  }, [\n    favorites,\n    search,\n    classes,\n    extraTools,\n    tools,\n    categorySortFunction,\n    toolSortFunction,\n    welcomePage,\n    backendTools,\n    toolFilterFunction,\n    t,\n  ]);\n\n  useEffect(() => {\n    const idx = tabs.findIndex(tab => tab.id === hash.slice(1));\n    if (idx > -1) {\n      setValue(idx);\n    }\n  }, [hash, value, tabs]);\n\n  const handleChange = (_: any, newValue: number) => {\n    const tab = tabs[newValue];\n    if (tab) {\n      analytics.captureEvent('click', tab.id, {\n        attributes: { toolName: tab.localizedTitle },\n      });\n      navigate(`#${tab.id}`);\n    }\n  };\n\n  return (\n    <Page themeId=\"tool\">\n      <Header title={t('toolsPage.title')} />\n      <Content className={classes.noPadding}>\n        <Grid\n          container\n          spacing={2}\n          direction=\"row\"\n          className={`${classes.noMargin} ${classes.fullWidth} ${classes.noPadding}`}\n        >\n          <Grid item xs={4} md={3} lg={2} className={classes.toolsBar}>\n            <Paper\n              component=\"form\"\n              className={classes.search}\n              sx={{ justifyContent: 'space-between' }}\n            >\n              <InputBase\n                placeholder={t('toolsPage.input.search')}\n                inputProps={{ 'aria-label': 'Search' }}\n                onChange={e => setSearch(e.target.value)}\n              />\n              <IconButton\n                disabled\n                aria-label=\"search\"\n                sx={{ mr: '16px !important', pr: '0 !important' }}\n              >\n                <SearchIcon />\n              </IconButton>\n            </Paper>\n            <Tabs\n              orientation=\"vertical\"\n              variant=\"scrollable\"\n              scrollButtons=\"auto\"\n              indicatorColor=\"primary\"\n              value={value}\n              onChange={handleChange}\n              aria-label=\"Tools selection\"\n              className={classes.menuTabs}\n            >\n              {tabs.map(tab => tab.tab)}\n            </Tabs>\n          </Grid>\n          <Grid item xs={8} md={9} lg={10} style={{ padding: '8px' }}>\n            <Suspense\n              fallback={\n                <Box\n                  display=\"flex\"\n                  width=\"100%\"\n                  height=\"50%\"\n                  alignItems=\"center\"\n                  justifyContent=\"center\"\n                >\n                  <CircularProgress />\n                </Box>\n              }\n            >\n              <TabContext value={`toolbox-tabpanel-${value}`}>\n                {tabs.map((tool, i) => {\n                  if (!tool.localizedTitle) {\n                    return null;\n                  }\n                  return (\n                    <TabPanel key={tool.id} value={`toolbox-tabpanel-${i}`}>\n                      <ContentHeader\n                        title={tool.localizedTitle}\n                        description={tool.localizedDescription}\n                      >\n                        {tool.headerButtons}\n                        {tool.showOpenInNewWindowButton !== false && (\n                          <Tooltip\n                            title={t('toolsPage.tabPanel.tooltipTitle')}\n                            arrow\n                          >\n                            <Button\n                              size=\"small\"\n                              onClick={() => openToolInWindow(tool.id)}\n                              color=\"inherit\"\n                            >\n                              <OpenInNew />\n                            </Button>\n                          </Tooltip>\n                        )}\n                        {tool.showFavoriteButton !== false && (\n                          <FavoriteButton toolId={tool.id} />\n                        )}\n                      </ContentHeader>\n                      {tool.component}\n                    </TabPanel>\n                  );\n                })}\n              </TabContext>\n            </Suspense>\n          </Grid>\n        </Grid>\n      </Content>\n    </Page>\n  );\n};\n"],"names":[],"mappings":"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"}